%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,russian]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}

\PassOptionsToPackage{booktabs}{sphinx}
\PassOptionsToPackage{colorrows}{sphinx}

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}





\usepackage[Sonny]{fncychap}
\ChNameVar{\Large\normalfont\sffamily}
\ChTitleVar{\Large\normalfont\sffamily}
\usepackage{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsrussian{\renewcommand{\contentsname}{Содержание:}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{0}
\usepackage{dirtree}


\title{Интеграция Artix\sphinxhyphen{}УНФ}
\date{апр. 13, 2023}
\release{0.1}
\author{PashkovKV}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Выпуск}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\sphinxstepscope


\chapter{Общее описание}
\label{\detokenize{description:id1}}\label{\detokenize{description::doc}}

\section{Документация по блоку обмена между Artix и УНФ в части выгрузки остатков из УНФ в кассовый сервер Artix и загрузки кассовых смен и продаж в УНФ.}
\label{\detokenize{description:artix-artix}}
\sphinxAtStartPar
Связь между 1С и Artix осуществляется с помощью Http\sphinxhyphen{}сервисов реализованных на стороне УНФ. Данные по продажам 1С забирает из базы данных
Кассового сервера с помощью Sql запросов. Таблицы из БД Кассового сервера подключены в УНФ в качестве внешнего источника данных.
Прокси сервер реализован на Python и располагается на отдельном сервере с Linux.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{gl}.png}
\end{figure}

\begin{sphinxadmonition}{note}{\label{\detokenize{description:id2}}План:}
\sphinxAtStartPar
Fix this
\end{sphinxadmonition}


\dirtree{%
	.1 /.	
	.1 Workshift\_load.
	.2 config.\DTcomment{каталог с файлами настроек}.
	.3 config.ini\ldots{} \begin{minipage}[t]{5cm}
		Файл содержит настройки программы{.}
	\end{minipage}.
	.2 log.\DTcomment{каталог с файлами лога}.
	.3 py\_log.log\DTcomment{файл лога}.
	.2 src.\DTcomment{каталог с файлами программы}.
	.3 app\_logger.py.\DTcomment{работа с логированием}.
	.3 db.py.\DTcomment{Работа с БД}.	
	.3 diff\_data.py.\ldots{} \begin{minipage}[t]{5cm}
		Файл содержит тексты запросов{.}
	\end{minipage}.
	.3 m\_config.py.\DTcomment{работа с конфигурацией}.	
	.3 m\_request.py.\DTcomment{работа с Http-запросами}.		
	.3 wsh\_load.py.\DTcomment{основной файл программы}.				
	.3 last\_date\_open.txt.\DTcomment{дата последней открытой смены ККМ}.	
	.3 last\_date.txt.\DTcomment{дата последней закрытой смены ККМ}.	
	.3 first.dat.\ldots{} \begin{minipage}[t]{5cm}
		Файл появляется после первого запуска программы
		если он отсутствует, то при запуске происходит 
		инициализация файлов с датами смен ККМ{.}
	\end{minipage}.
	.1 requirements.txt.\ldots{} \begin{minipage}[t]{5cm}
		Файл содержит наименование и версии установленных 
		модулей подключенных к программе, используется
		при начальной установке{.}
	\end{minipage}.
}


\sphinxstepscope


\chapter{Реализация в УНФ}
\label{\detokenize{unf:id1}}\label{\detokenize{unf::doc}}
\sphinxAtStartPar
Функционал работы с Artix со стороны УНФ реализован с помощью:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Подписки на события для документов товародвижения:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{)}%
\item {} 
\sphinxAtStartPar
Поступление товаров

\item {} 
\sphinxAtStartPar
Списание товаров

\item {} 
\sphinxAtStartPar
Оприходование товаров

\item {} 
\sphinxAtStartPar
Перемещение товаров ?

\item {} 
\sphinxAtStartPar
Возврат товаров поставщику

\item {} 
\sphinxAtStartPar
Отчет о розничных продажах ?

\end{enumerate}

\item {} 
\sphinxAtStartPar
Http\sphinxhyphen{}сервисы:
\begin{quote}

\sphinxAtStartPar
\DUrole{xref,std,std-ref}{1. Http\sphinxhyphen{}сервис Workshift}

\sphinxAtStartPar
\DUrole{xref,std,std-ref}{2. GetChangeShop}

\sphinxAtStartPar
\DUrole{xref,std,std-ref}{3. test\_s}
\end{quote}

\item {} 
\sphinxAtStartPar
Фоновых заданий и обработок

\end{enumerate}

\begin{sphinxadmonition}{note}{Примечание:}
\sphinxAtStartPar
Подумать о перемещении и Отчете о розничных продажах, нужно ли менять остатки на касссых после их проведения
\end{sphinxadmonition}

\begin{sphinxadmonition}{note}{\label{\detokenize{unf:id2}}План:}
\sphinxAtStartPar
Дописать подписки на события для остальных документов, кроме поступления
\end{sphinxadmonition}

\sphinxstepscope


\chapter{Внешняя программма}
\label{\detokenize{prox:id1}}\label{\detokenize{prox::doc}}
\sphinxAtStartPar
Внешняя программа реализована на языке Python и расположена на отдельном сервере с установленной серверной операционной системой Linux
Ubuntu 22.04.2 LTS (GNU/Linux 5.15.0\sphinxhyphen{}69\sphinxhyphen{}generic x86\_64)

\sphinxAtStartPar
Программа состоит из двух блоков, первый отвечает за получение остатков товаров из обработки и передачи на кассовый сервер Artix,
второй за отслеживание открытия и закрытия смен на кассах и переодической передачи этих данных в УНФ.

\sphinxstepscope


\chapter{Настройки}
\label{\detokenize{setting:id1}}\label{\detokenize{setting::doc}}
\sphinxstepscope


\section{Порядок внедрения касс в работу с Артикс:}
\label{\detokenize{kass:id1}}\label{\detokenize{kass::doc}}

\subsection{1. Создать магазин + касса на сервере.}
\label{\detokenize{kass:id2}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Создание Магазина \sphinxhyphen{} Вводить Код, Название, Формат справочников (из 1С), метка дисконта (выбор из созданных)

\item {} \begin{description}
\sphinxlineitem{Создание Кассы \sphinxhyphen{} Вводить Код, Название, Хост (IP), Тип кассы (Рабочее место кассира), Формат выгрузки продаж (с КС в 1С), Категория справочников (если используется), Состояние обмена (рекоменд. Выключен).         При использовании Конфигураций \sphinxhyphen{} Выбрать конфигурацию, и окружение (для рабочей кассы \sphinxhyphen{} Боевое)}\begin{itemize}
\item {} 
\sphinxAtStartPar
Создать структуру Магазин\sphinxhyphen{}Кассы можно/нужно заранее.

\end{itemize}

\end{description}

\end{enumerate}


\subsection{2. Настройка ПОС}
\label{\detokenize{kass:id3}}
\sphinxAtStartPar
Полуручной:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Самый простой способ предварительно настроить 1 пос, и сохранить нужные файлы настроек (настройки, оборудование и т.д.). Далее скопировать на другую ПОС в требуемые директории.

\end{enumerate}

\sphinxAtStartPar
Автоматически:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Использовать менеджер\sphinxhyphen{}конфигураций (что есть в КС), одна тонкость \sphinxhyphen{} возможно не все настройки можно произвести через него.

\item {} 
\sphinxAtStartPar
Включить обмен на сервере и запустить полную выгрузку справочников с сервера. После полной прогрузки справочников \sphinxhyphen{} перезапустить кассовую программу на ПОС

\end{enumerate}

\sphinxstepscope


\section{Добавление группы сертификатов со сроком действия через REST API.}
\label{\detokenize{sert:rest-api}}\label{\detokenize{sert::doc}}
\sphinxAtStartPar
\sphinxstylestrong{1. Добавление группы сертификатов со сроком действия через REST API.}
\begin{enumerate}
\sphinxsetlistlabels{\alph}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Добавить группу сертификатов в БД КС, сформировав запрос типа POST на url: \sphinxurl{http:/}/\textless{}host\textgreater{}:\textless{}port\textgreater{}/Csrest/rest/dictionaries/certificates

\item {} 
\sphinxAtStartPar
Тело запроса в формате Json должно быть подобного формата:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}code\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}rangefrom\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{30}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}rangeto\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{40}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Сертификаты\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}sum\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{300}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}inputmask\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{31}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}discountcampaign\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}test campaign\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
Атрибут свойства  discountcampaign должен содержать yaml акции, в которой как раз можно указать сроки действия.
Напрример, если смотреть на уже существующую группу сертификатов, созданную вручную через web\sphinxhyphen{}интерфейс LM с указанием срока действия (БД КС ArtixAll, таблица certificateTemp), то в поле discountcampaign увидим запись вида:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kt}{!!python/object:artixds.domain.DiscountCampaign}
\PYG{n+nt}{active}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{beginBonusesDateCalculate}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{beginBonusesIntervalCondition}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!python/unicode}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{date}\PYG{l+s}{\PYGZsq{}}
\PYG{n+nt}{beginBonusesIntervalMetric}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!python/unicode}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{day}\PYG{l+s}{\PYGZsq{}}
\PYG{n+nt}{beginBonusesIntervalValue}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{0}
\PYG{n+nt}{beginDate}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{beginDateWithBeginCurrentMetric}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!python/unicode}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{day}\PYG{l+s}{\PYGZsq{}}
\PYG{n+nt}{beginDateWithBeginNextMetric}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!python/unicode}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{day}\PYG{l+s}{\PYGZsq{}}
\PYG{n+nt}{beginRangeDate}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{2022\PYGZhy{}02\PYGZhy{}17}
\PYG{n+nt}{beginTime}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{checkedTags}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{daysOfWeek}\PYG{p}{:}\PYG{+w}{ }\PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{discounts}\PYG{p}{:}\PYG{+w}{ }\PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{endBonusesDateCalculate}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{endBonusesIntervalCondition}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!python/unicode}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{date}\PYG{l+s}{\PYGZsq{}}
\PYG{n+nt}{endBonusesIntervalMetric}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!python/unicode}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{day}\PYG{l+s}{\PYGZsq{}}
\PYG{n+nt}{endBonusesIntervalValue}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{0}
\PYG{n+nt}{endDate}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{endRangeDate}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{2022\PYGZhy{}02\PYGZhy{}17}
\PYG{n+nt}{endTime}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{id}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{57026161735168}
\PYG{n+nt}{interactionType}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{all}
\PYG{n+nt}{labels}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{manualActivate}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{name}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!python/unicode}\PYG{+w}{ }\PYG{l+s}{\PYGZsq{}}\PYG{l+s}{\PYGZsq{}}
\PYG{n+nt}{parent}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{parentGroup}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{priority}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{null}
\PYG{n+nt}{qualifiers}\PYG{p}{:}\PYG{+w}{ }\PYG{k+kt}{!!set}\PYG{+w}{ }\PYG{p+pIndicator}{\PYGZob{}}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{n+nt}{tagsIsAllowed}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{weight}\PYG{p}{:}\PYG{+w}{ }\PYG{l+lScalar+lScalarPlain}{300}
\end{sphinxVerbatim}

\sphinxAtStartPar
То есть в этом случае срок действия для группы сертификатов определен свойствами beginRangeDate и endRangeDate (от 2022\sphinxhyphen{}02\sphinxhyphen{}17 до 2022\sphinxhyphen{}02\sphinxhyphen{}17).

\sphinxAtStartPar
Берем этот Yaml как шаблон и изменияем даты beginRangeDate и endRangeDate на нужные.
\end{quote}

\item {} 
\sphinxAtStartPar
Далее  этот Yaml необходимо переделать в однострочный формат. Для этого после каждой строки добавляем rn, и переносим все строки в одну. В итоге должна получиться строка следующего вида:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!python/object:artixds.domain.DiscountCampaign\PYGZbs{}r\PYGZbs{}nactive: true\PYGZbs{}r\PYGZbs{}nbeginBonusesDateCalculate: null\PYGZbs{}r\PYGZbs{}nbeginBonusesIntervalCondition: !!python/unicode \PYGZsq{}date\PYGZsq{}\PYGZbs{}r\PYGZbs{}nbeginBonusesIntervalMetric: !!python/unicode \PYGZsq{}day\PYGZsq{}\PYGZbs{}r\PYGZbs{}nbeginBonusesIntervalValue: 0\PYGZbs{}r\PYGZbs{}nbeginDate: null\PYGZbs{}r\PYGZbs{}nbeginDateWithBeginCurrentMetric: !!python/unicode \PYGZsq{}day\PYGZsq{}\PYGZbs{}r\PYGZbs{}nbeginDateWithBeginNextMetric: !!python/unicode \PYGZsq{}day\PYGZsq{}\PYGZbs{}r\PYGZbs{}nbeginRangeDate: 2022\PYGZhy{}02\PYGZhy{}17\PYGZbs{}r\PYGZbs{}nbeginTime: null\PYGZbs{}r\PYGZbs{}ncheckedTags: null\PYGZbs{}r\PYGZbs{}ndaysOfWeek: []\PYGZbs{}r\PYGZbs{}ndiscounts: []\PYGZbs{}r\PYGZbs{}nendBonusesDateCalculate: null\PYGZbs{}r\PYGZbs{}nendBonusesIntervalCondition: !!python/unicode \PYGZsq{}date\PYGZsq{}\PYGZbs{}r\PYGZbs{}nendBonusesIntervalMetric: !!python/unicode \PYGZsq{}day\PYGZsq{}\PYGZbs{}r\PYGZbs{}nendBonusesIntervalValue: 0\PYGZbs{}r\PYGZbs{}nendDate: null\PYGZbs{}r\PYGZbs{}nendRangeDate: 2022\PYGZhy{}02\PYGZhy{}17\PYGZbs{}r\PYGZbs{}nendTime: null\PYGZbs{}r\PYGZbs{}nid: 62331387691573\PYGZbs{}r\PYGZbs{}ninteractionType: all\PYGZbs{}r\PYGZbs{}nlabels: null\PYGZbs{}r\PYGZbs{}nmanualActivate: null\PYGZbs{}r\PYGZbs{}nname: !!python/unicode \PYGZsq{}\PYGZsq{}\PYGZbs{}r\PYGZbs{}nparent: null\PYGZbs{}r\PYGZbs{}nparentGroup: null\PYGZbs{}r\PYGZbs{}npriority: null\PYGZbs{}r\PYGZbs{}nqualifiers: !!set \PYGZob{}\PYGZcb{}\PYGZbs{}r\PYGZbs{}ntagsIsAllowed: false\PYGZbs{}r\PYGZbs{}nweight: 300
\end{sphinxVerbatim}

\sphinxAtStartPar
И в таком виде эту строку можно добавить в тело POST\sphinxhyphen{}запроса (пункт 1.1) вместо записи  test campaign.
\end{quote}

\end{enumerate}

\sphinxAtStartPar
\sphinxstylestrong{2. Отправляем POST\sphinxhyphen{}запрос, указав данные для авторизации (как от  WEB  КЦ)}
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{1}.png}
\end{figure}
\end{quote}

\sphinxAtStartPar
Далее убеждаемся что запрос прошел без ошибок и проверяем в web\sphinxhyphen{}интерфейсе LM, что создалась группа сертификатов. Открываем эту группу на редактирование и убеждаемся, что сроки действия прописаны корректно.
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{2}.png}
\end{figure}
\end{quote}

\sphinxAtStartPar
\sphinxstylestrong{3. Затем добавляем сертификат на сервер POST\sphinxhyphen{}запросом http://\textless{}хост\textgreater{}:\textless{}порт бонусного сервера/сервера сертификатов\textgreater{}/ACC/rest/v1/cards.}
\begin{quote}

\sphinxAtStartPar
Тело запроса должно быть вида:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}number\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}30\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}accountNumber\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}30\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{        }\PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}EARN\PYGZus{}PAY\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\end{quote}
\end{quote}

\sphinxAtStartPar
Важно, чтобы значения  number и  accountNumber входили в диапозон номеров созданной группы сертификатов.

\sphinxstepscope


\section{Дополнительные материалы:}
\label{\detokenize{additional:id1}}\label{\detokenize{additional::doc}}

\subsection{1. Список директорий и файлов  основных настроек.}
\label{\detokenize{additional:id2}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} \begin{description}
\sphinxlineitem{/linuxcash/cash/conf/}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{)}%
\item {} 
\sphinxAtStartPar
ncash.ini \sphinxhyphen{} основной файл настроек

\item {} 
\sphinxAtStartPar
bcode.ini  \sphinxhyphen{} правила разбора ШК

\item {} 
\sphinxAtStartPar
frinit.conf \sphinxhyphen{} инициализация ФР

\item {} 
\sphinxAtStartPar
cliche.txt и tail.txt \sphinxhyphen{} Клише/подвал чека

\item {} 
\sphinxAtStartPar
artixsb.conf

\end{enumerate}

\end{description}

\item {} \begin{description}
\sphinxlineitem{/linuxcash/cash/conf/ncash.ini.d/}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{)}%
\item {} 
\sphinxAtStartPar
artixbonus.ini \sphinxhyphen{} работа с бонусным сервером

\item {} 
\sphinxAtStartPar
artixcertificate.ini

\item {} 
\sphinxAtStartPar
deferredcheck.ini \sphinxhyphen{} отложенные чеки

\item {} 
\sphinxAtStartPar
fr.ini

\item {} 
\sphinxAtStartPar
gui.ini \sphinxhyphen{} выбор интерфейса ПО

\item {} 
\sphinxAtStartPar
motp.ini \sphinxhyphen{} сигареты

\item {} 
\sphinxAtStartPar
markedgoods.ini \sphinxhyphen{} другая маркировка

\end{enumerate}

\end{description}

\item {} 
\sphinxAtStartPar
/linuxcash/cash/conf/drivers/ \sphinxhyphen{} Настройки подключения оборудования

\end{enumerate}

\sphinxAtStartPar
Сначала настраивается одна ПОС, полученные настройки используем как эталонные. После установки ПО на новую ПОС копируем настройки,
включая “Подключаемое оборудование”, проверяем и при необходимости вносим правки.


\subsection{2. Особенности настройки “Сбербанк”}
\label{\detokenize{additional:id3}}
\sphinxAtStartPar
Для работы с процессингом сбербанк необходимо установить пакет \sphinxhyphen{} \sphinxstyleemphasis{artix45\sphinxhyphen{}plugin\sphinxhyphen{}sb}.
В директорию \sphinxstylestrong{”/linuxcash/cash/paysystems/sb/“} разместить файлы приложения сбербанк полученного от сотрудников банка. Настроить подключение ПинПад согласно инструкции банка (pinpad.ini). Следует обратить внимание что при подключении пинпад через USB, необходимо правильно создать символьную ссылку на устройство:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ln} \PYG{o}{\PYGZhy{}}\PYG{n}{s} \PYG{o}{/}\PYG{n}{dev}\PYG{o}{/}\PYG{n}{serial}\PYG{o}{/}\PYG{n}{by}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{id}\PYG{o}{/}\PYG{p}{\PYGZob{}}\PYG{n}{Имя\PYGZus{}Устройства}\PYG{p}{\PYGZcb{}} \PYG{o}{/}\PYG{n}{linuxcash}\PYG{o}{/}\PYG{n}{cash}\PYG{o}{/}\PYG{n}{paysystems}\PYG{o}{/}\PYG{n}{sb}\PYG{o}{/}\PYG{n}{ttyS99}
\end{sphinxVerbatim}

\sphinxAtStartPar
Для работы с терминалом PAX SP30 \sphinxhyphen{} дополнительно установить пакет \sphinxstyleemphasis{ttypos}


\subsection{3. Ссылка на скачивание дистрибутива yuki}
\label{\detokenize{additional:yuki}}\begin{quote}

\sphinxAtStartPar
\sphinxurl{http://update.artix.su/static/yuki/}
\end{quote}


\subsection{4. Остатки}
\label{\detokenize{additional:id4}}
\sphinxAtStartPar
в конфигурационном файле /linuxcash/cash/conf/ncash.ini
Изменить:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{;}\PYG{n}{calculateRemainsOfGoods} \PYG{o}{=} \PYG{n}{false}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{p}{;}\PYG{n}{considerRemainsOfGoods} \PYG{o}{=} \PYG{n}{false}
\end{sphinxVerbatim}

\sphinxAtStartPar
на:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{calculateRemainsOfGoods} \PYG{o}{=} \PYG{n}{true}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{considerRemainsOfGoods} \PYG{o}{=} \PYG{n}{true}
\end{sphinxVerbatim}

\sphinxAtStartPar
После изменения настроек надо перезапустить кассовое По.
Тогда касса будет считать остатки и учитывать их при продажи


\subsection{5. Дисконтные карты (создание)}
\label{\detokenize{additional:id5}}\begin{quote}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
создать счет на бонусном сервере

\item {} 
\sphinxAtStartPar
привязать номер карты к счету

\item {} 
\sphinxAtStartPar
создать карту на кассовом сервере (группа должна быть создана заранее)

\end{enumerate}

\sphinxAtStartPar
1 и 2 это работа с апи бонусного сервера

\sphinxAtStartPar
3 это работа с файлом аиф, или через рестапи загрузки справочников с Кассовым севером.

\sphinxAtStartPar
\sphinxurl{https://docs.artix.su/pages/viewpage.action?pageId=27530936}
\end{quote}

\sphinxstepscope


\chapter{Файлы}
\label{\detokenize{files:id1}}\label{\detokenize{files::doc}}\begin{quote}

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Скачать эту документацию в pdf}}.
\end{quote}


\chapter{Индексы и таблицы}
\label{\detokenize{index:id1}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{search}

\end{itemize}

\sphinxAtStartPar
Что реализовать:

\begin{sphinxadmonition}{note}{План:}
\sphinxAtStartPar
Fix this
\end{sphinxadmonition}

\sphinxAtStartPar
({\hyperref[\detokenize{description:id2}]{\sphinxcrossref{\sphinxstyleemphasis{исходный элемент}}}} находится в /home/bat/Project/docs/Artix\_Global/source/description.rst, строка 18.)

\begin{sphinxadmonition}{note}{План:}
\sphinxAtStartPar
Дописать подписки на события для остальных документов, кроме поступления
\end{sphinxadmonition}

\sphinxAtStartPar
({\hyperref[\detokenize{unf:id2}]{\sphinxcrossref{\sphinxstyleemphasis{исходный элемент}}}} находится в /home/bat/Project/docs/Artix\_Global/source/unf.rst, строка 32.)



\renewcommand{\indexname}{Алфавитный указатель}
\printindex
\end{document}