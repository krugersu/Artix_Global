:orphan:

.. _GetChangeShop:

2. GetChangeShop
----------------

Сервис предназначен для получения информации по каким магазинам было изменение остатков в ту иили иную стророну.

**Пример запроса**

::

    http://192.168.252.250:8082/unf_vz_const/hs/GetChangeShop/V1/GetShop

**Структура запроса**

::    

    http://{Адрес сервера}/{Имя БД}/hs/{Имя}/V1/{Параметр}

Где:

    Адрес сервера - адрес сервера где опубликована база

    Имя БД - Имя опубликованной базы

    Имя - Имя запроса

    Параметр - Параметр запроса


Параметр:

#. "GetShop" - получить изменения по магазинам


**Описание**

``Запрос с параметром "GetShop"``



:term:`УНФ` получает запрос и вызывает функцию

.. function:: ИзмененныеМагазины()
    
    Формирует массив с номерами магазинов, в которых были изменения количества. Формирование происходит путем обхода каталогов в глобальнгом каталоге обена с Artix.
    Если в каталоге присутствует один или несколько файлов вида "1681466893_chg"[1]_, то номер этого магазина добавляется в итоговый массив, а файлы удаляются.



В случае удачного завершения работы сервис возвращает массив содержащий номера магазинов.



В случае удачного завершения работы сервис возвращает код "200", в противном варианте вернется код ошибки.

-----

.. [1] Имя файла  это псевдослучайное число образованное разностью дат, для достижения уникальности имени файла.

